<template>
      
          
          <!-- 扇形动画 -->
          <div class="sbox-item sbox-item-2">

             <!--  扇形展开 --> 
             <div class="sbox sbox-2">
                <div class="sbox-svg">
                 <!-- 动效部分 -->
                  <div class="motion-box">
                     <svg version="1.1" id="2_Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100%" height="100%" viewBox="0 0 300 200">
                        
                        <!-- 底部图片 -->
                        <g>
                          <defs>
                            <rect id="2_SVGID_1_" x="0" width="300" height="200"/>
                          </defs>
                          <clipPath id="2_SVGID_2_"> 
                            <use xlink:href="#2_SVGID_1_"  style="overflow:visible;"/>
                          </clipPath>
                          <g transform="matrix(1 0 0 1 0 0)" style="clip-path:url(#2_SVGID_2_);">
                              <image style="overflow:visible;" x='0' y='0' width="100%" height="100%" :xlink:href="imgSrc"   class="cp-img" preserveAspectRatio="xMidYMid slice">
                            </image>
                          </g>
                        </g>
                        

                        <!-- 百叶窗横条 -->
                        <g>
                          <defs>
                            <rect id="2_SVGID_3_" width="300" height="40" class="svgRect" />
                          </defs>
                          <clipPath id="2_SVGID_4_">
                            <use xlink:href="#2_SVGID_3_"  style="overflow:visible;"/>
                          </clipPath>
                          <g style="clip-path:url(#2_SVGID_4_);">
                            <defs>
                              <rect id="2_SVGID_5_" width="300" height="200"/>
                            </defs>
                            <clipPath id="2_SVGID_6_">
                              <use xlink:href="#2_SVGID_5_"  style="overflow:visible;"/>
                            </clipPath>
                            <g transform="matrix(1 0 0 1 -3.814697e-06 0)" style="clip-path:url(#2_SVGID_6_);">
                                <image style="overflow:visible;" width="1920" height="1080" :xlink:href="cimg"  transform="matrix(0.1958 0 0 0.2176 -53 -11)"></image>
                            </g>
                          </g>
                        </g>


                        <g>
                          <defs>
                            <rect id="2_SVGID_7_" y="40" width="300" height="40" class="svgRect" />
                          </defs>
                          <clipPath id="2_SVGID_8_">
                            <use xlink:href="#2_SVGID_7_"  style="overflow:visible;"/>
                          </clipPath>
                          <g style="clip-path:url(#2_SVGID_8_);">
                            <defs>
                              <rect id="2_SVGID_9_" y="-1" width="300" height="205"/>
                            </defs>
                            <clipPath id="2_SVGID_10_">
                              <use xlink:href="#2_SVGID_9_"  style="overflow:visible;"/>
                            </clipPath>
                            <g transform="matrix(1 0 0 1 -3.814697e-06 0)" style="clip-path:url(#2_SVGID_10_);">
                              
                                <image style="overflow:visible;" width="1920" height="1080" :xlink:href="cimg"  transform="matrix(0.1958 0 0 0.223 -53 -12.275)">
                              </image>
                            </g>
                          </g>
                        </g>


                        <g>
                          <defs> 
                            <rect id="2_SVGID_11_" y="80" width="300" height="40" class="svgRect" />
                          </defs>
                          <clipPath id="2_SVGID_12_">
                            <use xlink:href="#2_SVGID_11_"  style="overflow:visible;"/>
                          </clipPath>
                          <g style="clip-path:url(#2_SVGID_12_);">
                            <defs>
                              <rect id="2_SVGID_13_" y="1" width="300" height="200"/>
                            </defs>
                            <clipPath id="2_SVGID_14_">
                              <use xlink:href="#2_SVGID_13_"  style="overflow:visible;"/>
                            </clipPath>
                            <g transform="matrix(1 0 0 1 -3.814697e-06 0)" style="clip-path:url(#2_SVGID_14_);">
                              
                                <image style="overflow:visible;" width="1920" height="1080" :xlink:href="cimg"  transform="matrix(0.1958 0 0 0.2176 -53 -10)">
                              </image>
                            </g>
                          </g>
                        </g>


                        <g>
                          <defs>
                            <rect id="2_SVGID_15_" y="120" width="300" height="40" class="svgRect" />
                          </defs>
                          <clipPath id="2_SVGID_16_">
                            <use xlink:href="#2_SVGID_15_"  style="overflow:visible;"/>
                          </clipPath>
                          <g style="clip-path:url(#2_SVGID_16_);">
                            <defs>
                              <rect id="2_SVGID_17_" width="300" height="200"/>
                            </defs>
                            <clipPath id="2_SVGID_18_">
                              <use xlink:href="#2_SVGID_17_"  style="overflow:visible;"/>
                            </clipPath>
                            <g transform="matrix(1 0 0 1 -3.814697e-06 0)" style="clip-path:url(#2_SVGID_18_);">
                              <image style="overflow:visible;" width="1920" height="1080" :xlink:href="cimg"  transform="matrix(0.1958 0 0 0.2176 -53 -11)">
                              </image>
                            </g>
                          </g>
                        </g>


                        <g>
                          <defs>
                            <rect id="2_SVGID_19_" y="160" width="300" height="40" class="svgRect" />
                          </defs>
                          <clipPath id="2_SVGID_20_">
                            <use xlink:href="#2_SVGID_19_"  style="overflow:visible;"/>
                          </clipPath>
                          <g style="clip-path:url(#2_SVGID_20_);">
                            <defs>
                              <rect id="2_SVGID_21_" width="300" height="200"/>
                            </defs>
                            <clipPath id="2_SVGID_22_">
                              <use xlink:href="#2_SVGID_21_"  style="overflow:visible;"/>
                            </clipPath>
                            <g transform="matrix(1 0 0 1 -3.814697e-06 0)" style="clip-path:url(#2_SVGID_22_);">
                              
                                <image style="overflow:visible;" width="1920" height="1080" :xlink:href="cimg"  transform="matrix(0.1958 0 0 0.2176 -53 -11)">
                              </image>
                            </g>
                          </g>
                        </g>

                      </svg>
                  </div><!-- //end motion-box -->
                </div><!-- //end sbox-svg -->
             </div><!-- //end sbox-2 -->
               
          </div>


</template>




<script scoped>

    export default{
        data(){
            return{
              imgSrc: 'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1532604386990&di=614d672cf7c656d938dd4a37f141a362&imgtype=jpg&src=http%3A%2F%2Fimg4.imgtn.bdimg.com%2Fit%2Fu%3D2275076119%2C299053444%26fm%3D214%26gp%3D0.jpg',
              cimg: 'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1532858473691&di=582078f5400dd60b7de7a989956594c5&imgtype=0&src=http%3A%2F%2Fimg3.duitang.com%2Fuploads%2Fitem%2F201409%2F27%2F20140927130553_r342t.jpeg',
              timer: null
            }
        },
        props: {
          timers:{
            type: Object,
            default: null
          }
        },
        methods:{
          initEvent(){
            var This = this;

            //2. 百叶窗
            $('.sbox-item-2').click(function(){
              console.log('motion 2');
              This.motion($(this),$(this).find('.svgRect'),$(this).find('.cp-img'));
            }); 
            
          },
          motion(wrapper,elem,img){
           var This = this,h = 40;
           img.attr('xlink:href',this.imgSrc);
           wrapper.addClass('sbox-item-active');
           cancelAnimationFrame(this.timer);
           
           fn();

           function fn(){
            
            This.timer = requestAnimationFrame(fn);
            This.$emit('getTimer',This.timer);
            h-=0.3;
            //h = parseInt(h);

            elem.each(function(index,ele){
              ele.setAttribute('height',h);
            });

            if(h < 0.5){
              h = 40;
            }

           }
          }
        },
        computed:{
          
        },
        mounted(){
          this.initEvent();
        }
    }
</script>
